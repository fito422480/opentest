description: Extraer el access token
actions:
  - script: |
      $delay($macroArgs.delay);
  - description: Lanzar request para acceder al token
    action: org.getopentest.actions.HttpRequest
    args: 
      url: $data("mfs/data").AccessToken.url+"grant_type="+$macroArgs.grant_type+"&scope="+$macroArgs.scope+"&password="+$macroArgs.password+"&username="+"0"+$macroArgs.username
      headers:
        Authorization: Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQ=
        Content-Type: application/x-www-form-urlencoded
      verb: POST
   
  - description: Extraer Access token
    script: |
      var accessToken = JSON.parse($json($output.body)).access_token;
      $localData.accessToken = accessToken
      $log.error("ACCESSTOKEN guardado en LOCALDATA: "+ $localData.accessToken)